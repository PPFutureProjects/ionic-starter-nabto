<?xml version="1.0"?>
<unabto_queries 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://www.nabto.com/unabto/query_model.xsd">

  <!-- general queries -->

  <!-- public info for discovery -->
  <query name="get_public_device_info.json" id="10000">
    <request>
    </request>
    <response format="json">
      <parameter name="device_name" type="raw"/>
      <parameter name="device_type" type="raw"/>
      <parameter name="device_icon" type="raw"/>
      <parameter name="paired" type="uint8"/>
      <parameter name="pairingMode" type="uint8"/>      
    </response>
  </query>

  <!-- set general info -->
  <query name="set_device_info.json" id="10010">
    <request>
      <parameter name="device_name" type="raw"/>
    </request>
    <response format="json">
      <parameter name="device_name" type="raw"/>
    </response>
  </query>

  <!-- access control related queries -->

  <!-- get all users that have access to device -->
  <query name="get_users.json" id="11000">
    <request>
    </request>
    <response format="json">
      <list name="users">
        <parameter name="name" type="raw"/>
        <parameter name="fingerprint" type="raw"/>
        <parameter name="permissions" type="uint32"/>
      </list>
    </response>
  </query>

  <!-- pair client (user) with this device -->
  <query name="pair_with_device.json" id="11010">
    <request>
      <parameter name="user_name" type="raw"/>
    </request>
    <response format="json">
      <parameter name="user_name" type="raw"/>
      <parameter name="fingerprint" type="raw" representation="hex"/>
      <parameter name="is_owner" type="uint32"/>
    </response>
  </query>

  <!-- get security related settings -->
  <query name="get_security_settings.json" id="11020">
    <request>
    </request>
    <response format="json">
      <parameter name="current_user_is_owner" type="uint8_t"/> 
      <parameter name="remote_access_enabled" type="uint8_t"/> 
      <parameter name="open_for_pairing" type="uint8_t"/>
      <!-- 0: LOCAL_ACCESS, 1: REMOTE_ACCESS, 2: ADMIN_ACCESS -->
      <parameter name="default_permissions_after_pairing" type="uint8_t"/>
    </response>
  </query>

  <!-- set device-wide security related settings -->
  <query name="set_security_settings.json" id="11030">
    <request>
      <parameter name="remote_access_enabled" type="uint8_t"/> 
      <parameter name="open_for_pairing" type="uint8_t"/>
      <!-- 0: LOCAL_ACCESS, 1: REMOTE_ACCESS, 2: ADMIN_ACCESS -->
      <parameter name="default_permissions_after_pairing" type="uint8_t"/>
    </request>
    <response format="json">
      <parameter name="remote_access_enabled" type="uint8_t"/> 
      <parameter name="open_for_pairing" type="uint8_t"/>
      <parameter name="default_permissions_after_pairing" type="uint8_t"/>
    </response>
  </query>


  
  <!-- heatpump demo queries -->

  <!-- get all state details -->
  <query name="heatpump_get_full_state.json" id="20000">
    <request>
    </request>
    <response format="json">
      <parameter name="activated" type="uint8"/>
      <parameter name="mode" type="int32"/>
      <parameter name="target_temperature" type="int32"/>
      <parameter name="room_temperature" type="int32"/>
    </response>
  </query>

  <!-- set activation state: 1 => on, 0 => off -->
  <query name="heatpump_set_activation_state.json" id="20010">
    <request>
      <parameter name="activated" type="uint8"/>
    </request>
    <response format="json">
      <parameter name="activated" type="uint8"/>
    </response>
  </query>

  <!-- set thermostat target temperature -->
  <query name="heatpump_set_target_temperature.json" id="20020">
    <request>
      <parameter name="temperature" type="int32"/>
    </request>
    <response format="json">
      <parameter name="temperature" type="int32"/>
    </response>
  </query>

  <!-- set operational mode -->
  <query name="heatpump_set_mode.json" id="20030">
    <request>
      <parameter name="mode" type="int32"/>
    </request>
    <response format="json">
      <parameter name="mode" type="int32"/>
    </response>
  </query>


</unabto_queries>

